---
layout: post
---

보안 이슈로 암복호화 모듈을 써야 할 일이 생겼다.  
나에게 cryptographically signing 이걸 하라고 하는데  
단순히 RSA를 쓰는거 같지가 않아서 찾아 보았다.  

나름 잘 설명한 문서가 있어 일부 이해할 수 있었다.  
[cgi 사이트의 글](https://www.cgi.com/files/white-papers/cgi_whpr_35_pki_e.pdf)

크게 세 부분이 있다.
1. 데이터 암호화
2. 중간에 가로채서 데이터를 변경하지 않았는지 확인
3. 정말 그 사람이 보낸 것인가?


1번은 뭐 특별할 것 없는 내용이고 2번과 3번이 어렵다.  
2번을 왜 그러는지 이유 생략하고 설명하자면  
보내려는 데이터의 hash 값을 보내는 사람이 private key로 암호화 하고  
public key를 같이 넣어서 보낸다  
그럼 받는 사람은 같이 들어 있는 public key로 암호화된 hash 값을 복호화 하고  
데이터를 직접 hash 한 값과 비교를 한다.  

여기서 이게 정말 그 사람이 보낸 것이 맞는지 알 수 가 없다.  
누구나 RSA 키쌍을 만들수 있고 조작해서 hash 한다음 public key를 넣으면 되니까...  
public key가 정말 그 사람거야? 라고 확인하는 작업이 필요한데  
그것이 Certificate 이다.  

이 부분은 앞선 정성스런 내용과 달리 많은 생략이 이루어 지는데  
아무래도 쉽게 다룰 수 있는 내용이 아니라 그런가 보다.  
그래도 복호화 과정 그림을 생략하는 건 좀...  

아무튼 많은 도움이 되었고 회사에서 제공하는  
library를 어떻게 써야 할지 잘 고민해 봐야겠다.
